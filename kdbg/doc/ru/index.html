<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
   <meta name="GENERATOR" content="Mozilla/4.51 [en] (X11; I; Linux 2.2.5 i586) [Netscape]">
   <title>Отладчик</title>
</head>
<body>

<h1>Отладчик</h1>

<h2>Содержимое</h2>

<ul>
<li>
<a href="#Introduction">Введение</a></li>

<li>
<a href="#WhatsThis">Что мы тут видим?</a></li>

<li>
<a href="#UsingKDbg">Использование Отладчика</a></li>

<ul>
<li>
<a href="#BrkptList">Список точек останова</a></li>

<li>
<a href="#Environment">Указание аргументов программе, рабочей директории,
переменных окружения</a></li>

<li>
<a href="#GlobalOptions">Глобальные параметры</a></li>
</ul>

<li>
<a href="#TipsTricks">Советы и хитрости</a></li>

<li>
<a href="#KnownProblems">Известные проблемы</a></li>

<li>
<a href="#Author">Автор</a></li>
</ul>

<hr>

<h2><a NAME="Introduction"></a>Введение</h2>
Отладчик(KDbg) является графической оболочкой для <tt>gdb</tt>, отладчика, 
разработанного в рамках GNU проекта.
<p>На данный момент документации совсем не много.
<p>Для сильных духом существует документация о том, как <a href="types.html">Отладчик может различать типы</a>, такие как <tt>QString</tt>.

<h2><a NAME="WhatsThis"></a>Что мы тут видим?</h2>
Главное окно Отладчика состоит из четырех панелей:
<p>В <b>верхней левой</b> панели отображается исходный текст отлаживаемой 
программы. В основном, нужный файл с исходным текстом открывается 
автоматически. Для указания файла с исходным текстом, выберите пункт
меню <i>Файл|Открыть исходный текст</i>. Вы можете переключаться между
открытыми файлами с исходными текстами, выбрав нужный файл в меню <i>Окно</i>.
<p>В <b>нижней левой</b> панели отображаются обратная последовательность 
вызовов (backtrace), так же известных как кадры стека (stack frames), 
т.к. функции, которые были вызваны программой, еще не завершились. Самый 
глубоковложенный кадр стека (функция, которая выполняется в данный момент 
программой) отображается вверху. Для просмотра переменных данной функции 
щелкните два раза мышкой по кадру стека.
<p> В <b>верхней правой</b> панели отображаются локальные переменные.
Когда же программа останавливается, Отладчик отображает значения локальных
переменных в этой панели.
<p> В <b>нижней правой</b> панели отображаются различные выражения по вашему
выбору (такие выражения также называют <i>просмотром</i>?). Чтобы добавить
выражение, введите его в поле ввода и нажмите Enter или щелкните по кнопке
<i>Добавить</i>. Чтобы удалить выражение, выберите его мышкой и щелкните по
кнопке <i>Удалить</i>.
<p>Значок щестеренки на панели инструментов показывает, что gdb работает, в
этом случае щестеренка вращается. Если она вращается быстро - Отладчик не будет
отзываться на команды, если медленно - Отладчик считывает значения переменных.

<h2><a NAME="UsingKDbg"></a>Использование Отладчика</h2>
Для <b>отладки программы</b> выберите пунтк меню <i>Файл|Исполняемый модуль</i>.
Программа загрузится. Далее откроется окно <tt>xterm</tt>, в которое
будут выводится сообщения отлаживаемой программы. Если вы захотели занятся 
отладкой <b>образа памяти</b>, вам сначала придется загрузить исполняемый 
модуль, породивший образ памяти, а уж затем выбирать пункт меню 
<i>Файл|Образ памяти</i>. После этого Отладчик перейдет к точке программы,
вызвавшей создание образа памяти.
<p>Для запуска <b>программы с аргументами</b>, указания <b>рабочей 
директории</b> или <b>переменных среды</b>, выберите пункт меню 
<i>Исполнение|Аргументы</i>.
<a href="#Environment">Обратитесь сюда</a> для более подробной информации.
<p>В меню <i>Исполнение</i> вы найдете команды, необходимые для <b>запуска</b>
программы на исполнения, <b>пошаговой отладке</b> кода, <b>прерывания</b>
программы (<i>Останов</i>) во время исполнения. Основные команды 
(<i>Запустить</i> и разновидности <i>Пошаговой отладки</i>) привязаны к
функциональным клавишам. Для повышения эффективности отладки Я рекомендую
использовать именно их.
<br><font size=-1>Функции не являются настраиваемыми, но возможно вы 
захотите внести посильный вклад, да-нет?</font>
<p>В меню <i>Точки Останова</i> вы найдете команды, позволяющие устанавливать,
снимать, а также включать и выключать временные и постоянные <b>точки
останова</b>. Вы можете получить список активных точек останова. Вы можете
устанавливать точки останова, щелкнув в левом конце строки исходного
текста (левой кнопкой мышки), а также включать и выключать точки останова,
щелкнув туда средней кнопкой мышки.

<h3><a NAME="BrkptList"></a>Список точек останова</h3>
Для вызова списка точек останова выберите пункт меню 
<i>Точки останова|Список</i>. Для каждой точки останова отображается следующая
информация: месторасположение точки останова, количество попаданий(остановов),
если установлен - количество игнорирований, если установленно - условие 
(останова). Иконка слева от записи означает включена (полностью красная
кнопка) или  выключена (красная окружность) точка останова, является ли она
временной (с наложенными на иконку часами) или условной (с наложенным на
иконку знаком вопроса).
<p>Вы можете указать <b>условие</b> срабатывания точки останова (т.е.
программа будет остановлена только если условие сработает) или указать
<b>количество игнорирований</b> (т.е. программа не будет остановлена следующие
n раз прохода через эту точку). Для этого нажмите на кнопку <i>Условный</i>
и введите условие и/или количество игнорирований.

<h3><a NAME="Environment"></a>Указание аргументов программе, рабочей директории,
 переменных окружения</h3>
Выберите пункт меню <i>Исполнение|Аргументы</i> для вызова диалога, в котором
вы можете указать аргументы вызываемой программы, рабочую директорию и
переменные окружения.
<p>В верхней строке введите аргументы, которые следует передать вашей
программе. При следующем запуске программы ей будут переданы новые аргументы.
<p>В следующей строке вы можете указать рабочую директорию для вашей программы.
Новая рабочая директорию будет передана gdb немедленно, т.е. gdb будет работать
в новой директории как только вы нажмете кнопку <i>OK</i>. Ваша программа
воспользуется новым значение рабочей директории только при следующем запуске.
<p>В разделе переменных окружения введите выражения вида
<tt>VARIABLE=value</tt> для установки переменной окружения <tt>VARIABLE</tt> 
в значение <tt>value</tt> и нажмите кнопку <i>Изменить</i>.
Для удаления переменной выберите ее из списка ниже и нажмите кнопку 
<i>Удалить</i>. Для изменения значения переменной отредактируйте ее значение
в строке редактирования и нажмите кнопку <i>Изменить</i>. Если вы измените имя
переменной и нажмете кнопку <i>Изменить</i>, вы добавите новую переменную!
Новые переменные окружения будут использованы вашей программой при следующем
запуске.
<p>Важной переменной окружения, которую следует установить, если вы
используете glibc2 в Linux, является <tt>LD_BIND_NOW</tt>. Необходимо, чтобы
вы установили ее значение в <tt>1</tt> для всех ваших сессий отладки. Если
она не будет установлена, gdb не сможет выполнять пошаговую отладку функций,
импортируемых из <tt>libc</tt> и других разделяемых библиотек. 

<h3><a NAME="GlobalOptions"></a>Глобальные параметры</h3>
Для указания глобальных параметров выберите пункт меню <i>Файл|Глобальные
параметры</i>. Вы можете установить следующие параметры:
<ul><li>команду, с помощью которой вызывается gdb,</li><li>
команду, с помощью которой откроется терминал для вывода сообщений программы.
</li></ul>
Если хотите использовать другую версию gdb, вы можете указать ее вызов в пункте
<i>Как вызвать GDB</i>. Командой по умолчанию является <tt>gdb -fullname 
-nx</tt>.
Не забудте также указать эти аргументы, если вы меняете испольняемый модуль
gdb. Если вы не сделаете этого, Отладчик не будет работать. Если вы испортили
данную запись, полностью удалите ее содержимое и оно вернется к значению по
умолчанию.
<p>Если вы хотите использовать другую терминальную программу для отображения
сообщений программы, укажите ее в пункте <i>Терминальная программа для 
вывода сообщений программы</i>. Командой по умолчанию является
<tt>xterm -name kdbgio -title %T -e sh -c %C</tt>. В данной записи <tt>%T</tt> 
будет заменено на название окна, <tt>%C</tt> будет заменено на shell-скрипт,
зацикленный для поддержания окна открытым. (Нет, он не будет использовать
время процессора, он просто вызывает <tt>sleep 3600</tt> в цикле). 
Альтернативой этой записи может быть <tt>konsole -nowelcome -name kdbgio 
-caption %T -e sh -c %C</tt>.

<h2><a NAME="TipsTricks"></a>Советы и хитрости</h2>

<ul>
<li>
Всегда устанавливайте переменную окружения <tt>LD_BIND_NOW=1</tt> на
системах, использующих библиотеку glibc2.
<a href="#Environment">Смотри выше</a>.</li>

<li>
Вы можете пользоваться точками останова как закладками: просто установите
точку останова и выключите ее. Позднее вы можете с легкостью вернуться к
этой точки дважды щелкнув по ней в списке точек останова (или же выбрав
ее и нажав кнопку <i>Посмотреть код</i>). Т.к. точки останова являются 
постоянными (т.е. Отладчик запоминает их при последующих вызовах программы),
они останутся на тех же местах при следущем вызове Отладчика для отладки
этой программы. </li>

<li>
Вы можете изменять значения переменных: В секции просмотра переменных
(внизу справа) наберите присвоение: <tt>var.member=17</tt> и щелкните по
кнопке <i>Добавить</i>. Это приведет к немедленному изменению значения
переменной. Теперь вы должны удалить выражение из списка (выбрав его и
щелкнув по кнопке <i>Удалить</i>). Это необходимо сделать потому, что
значения переменных сверяются при каждом останове программы, а следовательно
значение переменной будет всегда изменяться на указанное снова и снова!</li>

<li>
Вы можете задавать различные способы представления значений в секции просмотра
с помощью указания перед именем переменной специкатор формата gdb. Например,
<tt>/xvar.member</tt> приведет к отображению значения переменной
<tt>var.member</tt> в шеснадцатиричном виде.</li>
</ul>

<h2><a NAME="KnownProblems"></a>Известные проблемы</h2>
У gdb 4.16 имеются проблемы при обработке C++ классов, имеющих виртуальный
базовый класс (такие классы очень часто встречаются в программах, использующих
CORBA). Он постоянно аварийно завершается по ошибке сегментации. Отладчик
сообщит об непредвиденных завершениях исполнения gdb. К сожалению с этим
нельзя ничего поделать. Вам придется запустить gbd заново, выбрав пункт
меню <i>Файл|Исполняемый модуль</i>, который приведет к перезапуску сессии 
отладки :-(.
<p>Распознавание типов Отладчика работает хорошо только для тех библиотек, 
с которыми отлаживаемая программа слинкована динамически.

<h2><a NAME="Author"></a>Автор</h2>
Отладчик(KDbg) разработан <a href="mailto:Johannes.Sixt@telecom.at">Йоханнесом Сикстом</a>
с помощью многих других людей.
<br>Домашняя страничка Отладчика(KDbg) <a href="http://members.telecom.at/~johsixt/kdbg.html">http://members.telecom.at/~johsixt/kdbg.html</a>.
</body>
</html>
